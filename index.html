<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Calculadora de Domicilio - Armenia, Quindío</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <style>
    body { font-family: Arial, sans-serif; background: #e3f2fd; margin: 0; padding: 0; display: flex; flex-direction: column; align-items: center; }
    header { width: 100%; background: #0d47a1; color: white; text-align: center; padding: 18px 0 10px 0; margin-bottom: 0px; box-shadow: 0 2px 8px rgba(0,0,0,.18); }
    main { background: #fff; border-radius: 10px; box-shadow: 0 2px 12px rgba(13,71,161,0.12); padding: 18px 20px; width: 370px; margin-top: 20px; text-align: center; }
    label { font-weight: bold; color: #0d47a1; margin-bottom: 6px; display: block; text-align: left; }
    .autocomplete { position: relative; }
    input[type="text"] { width: 100%; padding: 9px 10px; border: 2px solid #1976d2; border-radius: 6px; margin-bottom: 2px; font-size: 1rem; background: #f4fbff; color: #144d8e; }
    .suggestions { position: absolute; left: 0; right: 0; top: 40px; background: #fff; border: 1px solid #1976d2; z-index: 99; max-height: 145px; overflow-y: auto; border-radius: 0 0 6px 6px; }
    .suggestion-item { padding: 7px 11px; cursor: pointer; border-bottom: 1px solid #e3f2fd;}
    .suggestion-item:last-child { border-bottom: none; }
    .suggestion-item:hover { background: #e3f2fd; }
    button { width: 100%; background: #1976d2; color: white; border: none; border-radius: 8px; padding: 12px; font-size: 1.1rem; font-weight: bold; cursor: pointer; margin-bottom: 10px; transition: background 0.3s; }
    button:hover { background: #0d47a1; }
    #map { width: 370px; height: 290px; border-radius: 10px; margin: 15px 0 13px 0; box-shadow: 0 2px 10px rgba(13, 71, 161, 0.1);}
    #resultado { background: #e3f2fd; color: #0d47a1; font-weight: bold; font-size: 1.13rem; padding: 12px; border-radius: 7px; margin-top: 13px; min-height: 20px; }
    #error { background: #fbe9e7; color: #b71c1c; border-radius: 7px; margin-top: 10px; font-weight: bold; font-size: 1rem; padding: 7px; min-height: 18px; }
  </style>
</head>
<body>
  <header>
    <h1>Calculadora de Precios de Domicilio</h1>
    <div>Armenia, Quindío, Colombia</div>
  </header>
  <main>
    <label for="destino">Dirección o barrio de destino</label>
    <div class="autocomplete">
      <input type="text" id="destino" placeholder="Escribe dirección o barrio" autocomplete="off" />
      <div id="sugerencias"></div>
    </div>
    <button id="calcularBtn">Calcular precio</button>
    <div id="map"></div>
    <div id="resultado"></div>
    <div id="error"></div>
  </main>
  <script>
    const LIMITE = {norte: 4.5915, sur: 4.5133, este: -75.5948, oeste: -75.681};

    let map, marcadorOrigen, marcadorDestino, userLatLng = null, destinoSeleccionado = null;

    function estaDentroDeArmenia(lat, lng) {
      return lat <= LIMITE.norte && lat >= LIMITE.sur && lng >= LIMITE.oeste && lng <= LIMITE.este;
    }
    function mostrarError(msg) {
      document.getElementById('resultado').textContent = "";
      document.getElementById('error').textContent = msg;
    }
    function limpiarError() { document.getElementById('error').textContent = ""; }
    function mostrarResultado(msg) { document.getElementById('resultado').innerHTML = msg; }
    function limpiarResultado() { document.getElementById('resultado').textContent = ''; }
    function calcularDistancia(origen, destino) {
      const R = 6378137;
      const dLat = (destino.lat - origen.lat) * Math.PI / 180;
      const dLng = (destino.lng - origen.lng) * Math.PI / 180;
      const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
        Math.cos(origen.lat * Math.PI / 180) * Math.cos(destino.lat * Math.PI / 180) *
        Math.sin(dLng/2) * Math.sin(dLng/2);
      const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
      return R * c;
    }
    function calcularPrecio(d) {
      if (d <= 700) return 5000;
      if     
